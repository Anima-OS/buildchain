{
    "name": "buildchain",
    "base": "ubuntu:16.04",
    "commands": [
        ["apt-get", "install", "-y", "gcc"],
        ["wget", "https://sh.rustup.rs", "-O", "rustup.sh"],
        ["chmod", "+x", "rustup.sh"],
        ["./rustup.sh", "-y", "--default-toolchain", "nightly"],
        ["git", "clone", "https://github.com/system76/buildchain.git", "source"],
        ["mkdir", "sysroot"],
        ["bash", "-c", "source .cargo/env && cargo install --path source --root sysroot"],
        ["mkdir", "artifacts"],
        ["tar", "--create", "--xz", "--file", "artifacts/buildchain.tar.xz", "--directory", "sysroot", "."]
    ],
    "artifacts": "/root/artifacts"
}
