{
    "name": "buildchain",
    "base": "ubuntu:16.04",
    "source": {
        "kind": "git",
        "url": "https://github.com/system76/buildchain.git"
    },
    "commands": [
        ["apt-get", "install", "-y", "--no-install-recommends", "cmake", "gcc", "libssl-dev", "pkg-config"],
        ["wget", "https://sh.rustup.rs", "-O", "rustup.sh"],
        ["chmod", "+x", "rustup.sh"],
        ["./rustup.sh", "-y", "--default-toolchain", "nightly"],
        ["bash", "-c", "source .cargo/env && cd source && buildchain.sh"],
        ["cp source/target/sysroot.tar.xz artifacts/buildchain.tar.xz"]
    ]
}
